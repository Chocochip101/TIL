# DB 이중화 원리
1. 클라이언트가 `Insert/Update/Delete` 을 누르면 먼저 Master 서버에 존재하는 `Binary log` 에 변경사항을 모두 기록합니다.

2. Master Thread 는 비동기적 으로(복사되는 시간을 기다려주지 않습니다.) `Binary log를 읽어 Slave 서버로 전송`합니다.


3. Slave 의 `I/O Thread` 는 Master로 부터 받은 변경 데이터들을 `Relay log 에 기록`을 합니다.

4. Slave의 **SQL Thread** 는 Relay log의 기록들을 읽어 자신의 스토리지 엔진에 최종 적용합니다.
    
# 데이터 불일치 해결
    
1. **세마포어 사용:** 슬레이브에서 SELECT 쿼리를 실행하기 전에 특정 세마포어(락 또는 뮤텍스)를 사용하여 해당 데이터가 마스터로부터 동기화되었음을 확인합니다.

2. **동기화 지연 모니터링:** 슬레이브 서버에서 마스터와의 복제 지연 시간을 모니터링하고, 일정 시간이 지난 후에 SELECT 작업을 실행하도록 스케줄링합니다. 이를 통해 데이터가 충분한 시간 동안 동기화되도록 할 수 있습니다.

3. **동기화 확인 후 SELECT:** 슬레이브 서버에서 복제 상태를 모니터링하고, 데이터가 마스터로부터 정확하게 동기화된 후에 SELECT 쿼리를 실행합니다. 이를 위해 **`SHOW SLAVE STATUS`** 명령을 사용하여 복제 상태를 확인하고, 슬레이브가 업데이트되었음을 확인할 수 있습니다.